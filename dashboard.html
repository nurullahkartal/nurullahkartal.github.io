<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | NKartal Yönetim Portalı</title>
    
    <link rel="icon" type="image/svg+xml" href="logo.svg">
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        // Oturum kontrolü
        const accessGranted = sessionStorage.getItem('nk_access_granted');
        
        if (accessGranted !== 'true') {
            window.location.replace('portal-giris.html');
        }
    </script>
    
    <style>
        .dashboard-container {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            color: #fff;
        }

        .welcome-card {
            background: #1a1a1a;
            border-left: 5px solid var(--primary);
            padding: 30px;
            margin-top: 50px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            margin-bottom: 30px; /* Log alanı için boşluk */
        }

        .welcome-card h1 {
            color: var(--primary);
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .data-card {
            background: #0d0d0d;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #333;
            transition: transform 0.3s;
        }
        
        .data-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 255, 136, 0.1);
        }

        .data-card i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .data-card h3 {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .data-card p {
            font-size: 1.5rem;
            font-weight: bold;
            color: #fff;
        }

        /* --- YENİ LOG STİLLERİ --- */
        .log-section {
            margin-top: 50px;
        }
        .log-section h2 {
            color: #fff;
            font-size: 1.8rem;
            margin-bottom: 15px;
            border-bottom: 2px solid #222;
            padding-bottom: 5px;
        }
        .log-container {
            background-color: #000;
            color: #00ff88; /* Matrix yeşili terminal metni */
            border: 1px solid #00552d;
            height: 400px;
            overflow-y: scroll;
            padding: 15px;
            font-family: 'Consolas', 'Monospace', monospace;
            font-size: 0.9rem;
            border-radius: 6px;
        }
        .log-entry {
            white-space: pre-wrap; /* Satır sonlarını koru */
            margin-bottom: 5px;
            line-height: 1.4;
        }
        /* Log Seviyeleri */
        .log-info { color: #00ff88; }
        .log-warning { color: #ffeb3b; }
        .log-error { color: #ff0000; font-weight: bold; }

    </style>
</head>
<body>
    <canvas id="neural-canvas"></canvas>

    <nav class="glass-nav">
        <a href="index.html" class="logo">
            <img src="logo.svg" alt="Nurullah Kartal Logo">
            <span>NK<span class="highlight">ARTAL</span></span>
        </a>
        <div class="nav-links" id="nav-menu">
            <a href="dashboard.html" class="active"><i class="fas fa-chart-line"></i> Dashboard</a>
            <a href="#" onclick="logout()" class="portal-btn"><i class="fas fa-sign-out-alt"></i> Çıkış Yap</a>
        </div>
        <button class="menu-toggle" aria-label="Menü" onclick="toggleMenu()">
            <i class="fas fa-bars"></i>
        </button>
    </nav>

    <main class="dashboard-container">
        <div class="welcome-card">
            <h1>Hoş Geldiniz, Yönetici!</h1>
            <p>Sistem genelindeki kritik verilerinize buradan ulaşabilirsiniz. Portalınıza en son 14 Aralık 2025 tarihinde erişim sağlandı.</p>
        </div>

        <div class="info-grid">
            <div class="data-card">
                <i class="fas fa-users"></i>
                <h3>Aktif Kullanıcı</h3>
                <p>1,245</p>
            </div>
            <div class="data-card">
                <i class="fas fa-project-diagram"></i>
                <h3>Devam Eden Proje</h3>
                <p>23</p>
            </div>
            <div class="data-card">
                <i class="fas fa-dollar-sign"></i>
                <h3>Bu Ayki Gelir</h3>
                <p>₺875,000</p>
            </div>
            <div class="data-card">
                <i class="fas fa-bug"></i>
                <h3>Kritik Hata (Bug)</h3>
                <p style="color:red;">0</p>
            </div>
        </div>

        <div class="log-section">
            <h2><i class="fas fa-terminal"></i> Gerçek Zamanlı Sistem Logları</h2>
            <div id="log-monitor" class="log-container">
                <div class="log-entry log-info">Sistem Başlatılıyor... Lütfen Bekleyiniz.</div>
            </div>
        </div>

        <div style="margin-top: 50px; text-align: center; color: #555;">
            <p><i class="fas fa-lock"></i> Tüm veriler şifrelenmiş kanallar üzerinden aktarılmaktadır.</p>
        </div>
    </main>

    <script src="script.js"></script>
    <script src="tracker.js"></script>
    
    <script>
        // --- LOGOUT FONKSİYONU ---
        function logout() {
            sessionStorage.removeItem('nk_access_granted');
            window.location.href = 'index.html';
        }

        // --- DİNAMİK LOG ÜRETİMİ ---
        const logMonitor = document.getElementById('log-monitor');
        const logMessages = [
            { level: 'INFO', text: 'Kernel Initializing. System check successful.' },
            { level: 'INFO', text: 'Telemetry connection established. Port 443.' },
            { level: 'INFO', text: 'Database connection pool activated. Max threads: 64.' },
            { level: 'WARNING', text: 'Low memory usage detected on node #3. Monitoring.' },
            { level: 'INFO', text: 'AI Optimization Engine online. Status: IDLE.' },
            { level: 'INFO', text: 'API Gateway ready for external requests.' },
            { level: 'ERROR', text: 'Authentication token expired for service [LGT-P3]. Auto-refresh initiated.' },
            { level: 'INFO', text: 'DNS Resolution successful. Starting data stream.' },
            { level: 'WARNING', text: 'User activity spike detected from IP 192.168.1.5.' },
            { level: 'INFO', text: 'New client connection established: [Client-389].' },
        ];

        let logIndex = 0;

        function addLogEntry() {
            if (logIndex >= logMessages.length) {
                logIndex = 0; // Döngüye devam et
            }
            
            const log = logMessages[logIndex];
            const timestamp = new Date().toLocaleTimeString('tr-TR');
            
            const newLog = document.createElement('div');
            newLog.className = `log-entry log-${log.level.toLowerCase()}`;
            newLog.innerHTML = `[${timestamp}] [${log.level}] ${log.text}`;
            
            logMonitor.appendChild(newLog);
            logMonitor.scrollTop = logMonitor.scrollHeight; // En alta kaydır

            logIndex++;
        }

        // Her 1.5 saniyede bir yeni log ekle
        setInterval(addLogEntry, 1500);

        // İlk logu hemen ekle
        addLogEntry();
    </script>
</body>
</html>
